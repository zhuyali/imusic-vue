webpackJsonp([1,0],[function(e,t,s){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=s(1),n=i(a),c=s(10),u=i(c);new n.default({el:"#app",template:"<App/>",components:{App:u.default}})},,function(e,t,s){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(1),n=i(a),c=s(12),u=i(c),r=s(11),o=i(r),d=s(13),p=i(d);n.default.use(s(18)),t.default={name:"app",data:function(){return{index:0,musicLength:0,paused:!1,stopped:!0,pausePressed:!1,musicList:[]}},components:{Tape:u.default,Panel:o.default,MusicList:p.default},methods:{onStateChanged:function(e,t){var s=this.$refs.audio;e||this.stopped||t?e&&!t?(this.paused=!0,this.stopped=!1,s.pause()):!this.stopped&&t?(this.paused=!1,this.stopped=!0,s.pause()):e||!this.stopped||t||(this.paused=!1,this.stopped=!1,s.load(),s.play()):(this.paused=!1,this.stopped=!1,s.play())},onMusicChanged:function(e){var t=this.$refs.audio;this.index=e,t.setAttribute("src",this.musicList[e].path),document.title=this.musicList[e].name+" - imusic",t.play()},onPausePressed:function(e){this.pausePressed=e},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),s=window.location.search.substr(1).match(t);return s?unescape(s[2]):null}},mounted:function(){var e=this.$refs.audio,t=this;if("localhost"===document.domain||"127.0.0.1"===document.domain)n.default.http.get("/api/get_musics").then(function(e){return e.json()}).then(function(s){s.success&&(t.musicList=s.data,t.musicLength=s.data.length,e.setAttribute("src",t.musicList[0].path),document.title=t.musicList[0].name+" - imusic")});else{var s=t.getQueryString("url"),i="http://mr1.doubanio.com/678811c82aa655a13a64dcc4d1bea8ac/0/fm/song/p2638812_128k.mp3",a=[];a.push({name:s?s.substr(s.lastIndexOf("/")+1):"美好事物-房东的猫.mp3",path:s||i}),t.musicList=a,t.musicLength=1,e.setAttribute("src",t.musicList[0].path),document.title=t.musicList[0].name+" - imusic"}e.addEventListener("ended",function(){t.index=t.index===t.musicLength-1?0:t.index+1,e.setAttribute("src",t.musicList[t.index].path),document.title=t.musicList[t.index].name+" - imusic",e.play()})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"panel",data:function(){return{playPressed:!1,prePressed:!1,nextPressed:!1,stopPressed:!1}},props:["paused","index","pausePressed","musicLength"],methods:{changeState:function(e,t){this.$emit("changeState",e,t)},changeMusic:function(e){this.$emit("changeMusic",e)},pressPause:function(e){this.$emit("pressPause",e)},handleClick:function(e){var t=this.$refs.audio;t.play();var s=this;switch(e.target.id){case"play":s.playPressed=!0,setTimeout(function(){s.playPressed=!1},100),s.pressPause(!1),s.changeState(!1,!1);break;case"pause":s.paused?(s.pressPause(!1),s.changeState(!1,!1)):(s.pressPause(!0),s.changeState(!0,!1));break;case"pre":0===s.index?s.index=s.musicLength-1:s.index=s.index-1,s.pressPause(!1),s.prePressed=!0,setTimeout(function(){s.prePressed=!1},100),s.changeState(!1,!1),s.changeMusic(s.index);break;case"next":s.index===s.musicLength-1?s.index=0:s.index=s.index+1,s.pressPause(!1),s.nextPressed=!0,setTimeout(function(){s.nextPressed=!1},100),s.changeState(!1,!1),s.changeMusic(s.index);break;case"stop":s.pressPause(!1),s.stopPressed=!0,s.changeState(!0,!0),setTimeout(function(){s.stopPressed=!1},100)}}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"tape",props:["paused","stopped"]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"musicList",props:["musicList"],methods:{changeMusic:function(e){this.$emit("changeMusic",e)},playSpecificMusic:function(e){for(var t in this.musicList)if(this.musicList[parseInt(t)].path===e.target.getAttribute("data-path")){var s=parseInt(t);this.$emit("changeMusic",s),this.$emit("pressPause",!1);break}this.changeState(!1,!1)},pressPause:function(e){this.$emit("pressPause",e)},changeState:function(e,t){this.$emit("changeState",e,t)}}}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,s){var i,a;s(9),i=s(2);var n=s(17);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,e.exports=i},function(e,t,s){var i,a;s(7),i=s(3);var n=s(15);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-869b250c",e.exports=i},function(e,t,s){var i,a;s(6),i=s(4);var n=s(14);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-1444601c",e.exports=i},function(e,t,s){var i,a;s(8),i=s(5);var n=s(16);a=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(a=i=i.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-92e8750e",e.exports=i},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{staticClass:"imusic-tape-wrapper"},[t("div",{staticClass:"imusic-tape"},[e.paused||e.stopped?t("div",{staticClass:"imusic-tape-back"},[e._m(0)," ",e._m(1)]):t("div",{staticClass:"imusic-tape-back"},[t("div",{staticClass:"imusic-tape-wheel imusic-tape-wheel-left clockwise"},[t("div")])," ",t("div",{staticClass:"imusic-tape-wheel imusic-tape-wheel-right anticlockwise"},[t("div")])])," "," ",e._m(2)])])},staticRenderFns:[function(){var e=this,t=e.$createElement;return t("div",{staticClass:"imusic-tape-wheel imusic-tape-wheel-left"},[t("div")])},function(){var e=this,t=e.$createElement;return t("div",{staticClass:"imusic-tape-wheel imusic-tape-wheel-right"},[t("div")])},function(){var e=this,t=e.$createElement;return t("div",{staticClass:"imusic-tape-front imusic-tape-side-a"},[t("span",["A"])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("ul",{staticClass:"imusic-controls"},[t("li",{staticClass:"imusic-control-play control",class:{"imusic-control-pressed":e.playPressed},attrs:{id:"play"},on:{click:e.handleClick}},["\n  Play",t("span",["▶"])])," ",t("li",{staticClass:"imusic-control-pause control",class:{"imusic-control-pressed":e.pausePressed},attrs:{id:"pause"},on:{click:e.handleClick}},["\n  Pause",t("span",["❚❚"])])," ",t("li",{staticClass:"imusic-control-rewind control",class:{"imusic-control-pressed":e.prePressed},attrs:{id:"pre"},on:{click:e.handleClick}},["\n  Pre",t("span",["◁"])])," ",t("li",{staticClass:"imusic-control-fforward control",class:{"imusic-control-pressed":e.nextPressed},attrs:{id:"next"},on:{click:e.handleClick}},["\n  Next",t("span",["▷"])])," ",t("li",{staticClass:"imusic-control-stop control",class:{"imusic-control-pressed":e.stopPressed},attrs:{id:"stop"},on:{click:e.handleClick}},["\n  Stop",t("span",["◼"])])," ",t("audio",{ref:"audio",attrs:{id:"soundAudio",src:"src/assets/sounds/click.mp3"}},[t("span",["HTML5 audio not supported"])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{attrs:{id:"music-list"}},[t("ol",[e._l(e.musicList,function(s){return t("li",{staticClass:"item",attrs:{"data-path":s.path},on:{click:e.playSpecificMusic}},[e._s(s.name)])})])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{attrs:{id:"app"}},[t("audio",{ref:"audio",attrs:{id:"audio"}},[t("span",["HTML5 audio not supported"])])," ",t("tape",{attrs:{paused:e.paused,stopped:e.stopped}})," ",t("panel",{attrs:{paused:e.paused,musicLength:e.musicLength,index:e.index,pausePressed:e.pausePressed},on:{changeState:e.onStateChanged,changeMusic:e.onMusicChanged,pressPause:e.onPausePressed}})," ",t("musicList",{attrs:{musicList:e.musicList},on:{changeState:e.onStateChanged,changeMusic:e.onMusicChanged,pressPause:e.onPausePressed}})])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.ca7fbbdaf07a24c14d7e.js.map